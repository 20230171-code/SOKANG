<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¼ë©´ ì¡°ë¦¬ ë„ìš°ë¯¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter í°íŠ¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            padding: 1rem;
        }
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ì„ íƒ ì‚¬í•­) */
        .ramen-buttons-container::-webkit-scrollbar {
            display: none;
        }
        .ramen-buttons-container {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="min-h-screen flex items-start justify-center">

    <div class="w-full max-w-4xl bg-white shadow-2xl rounded-xl p-6 md:p-10 mt-5">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-red-600 mb-1">
                ğŸœ ë¼ë©´ ì¡°ë¦¬ ë„ìš°ë¯¸ 
            </h1>
            <!-- ì˜ë‚¨ê³µê³  ì¥ì„±ìˆ˜ ì´ë¦„ ì¶”ê°€ -->
            <p class="text-xl font-semibold text-gray-800 mb-3">
                ì˜ë‚¨ê³µê³  ì¥ì„±ìˆ˜
            </p>
            <p class="text-gray-600 text-lg">ì›í•˜ëŠ” ë¼ë©´ì„ ì„ íƒí•˜ë©´ ì¡°ë¦¬ë²•ê³¼ ë‹¨ê³„ë³„ íƒ€ì´ë¨¸ê°€ ì¤€ë¹„ë©ë‹ˆë‹¤.</p>
        </header>

        <!-- ë¼ë©´ ë²„íŠ¼ ì˜ì—­ -->
        <div id="ramen-buttons" class="ramen-buttons-container grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 overflow-x-auto pb-4 mb-8">
            <!-- ë²„íŠ¼ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <hr class="my-6 border-gray-200">

        <!-- ì¡°ë¦¬ë²• ë° íƒ€ì´ë¨¸ ì˜ì—­ -->
        <div id="ramen-display" class="bg-red-50 p-6 rounded-xl shadow-inner min-h-[300px]">
            <h2 id="current-ramen-name" class="text-2xl font-bold text-red-700 mb-4 text-center">
                ë¼ë©´ì„ ì„ íƒí•´ì£¼ì„¸ìš”
            </h2>
            
            <div id="instruction-card" class="bg-white p-4 rounded-lg shadow-md mb-6 hidden">
                <h3 class="text-xl font-semibold text-gray-800 mb-3">ì„ íƒí•œ ë¼ë©´ ì¡°ë¦¬ë²•</h3>
                <p id="ramen-instructions" class="text-gray-700 whitespace-pre-line text-base"></p>
            </div>

            <!-- íƒ€ì´ë¨¸ ë° ë‹¨ê³„ ë²„íŠ¼ ì˜ì—­ -->
            <div id="timer-area" class="flex flex-col items-center justify-center space-y-6">
                
                <p id="timer-message" class="text-xl font-medium text-gray-700 text-center transition-opacity duration-500 min-h-[30px]">
                    ì„ íƒì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...
                </p>

                <div id="timer-display" class="text-6xl font-extrabold text-red-500 hidden transition-all duration-300">
                    00:00
                </div>
                
                <!-- ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ -->
                <button id="next-step-button" onclick="nextStep()" class="bg-red-500 text-white px-8 py-3 rounded-full font-bold text-lg shadow-xl hover:bg-red-600 active:bg-red-700 transition duration-300 hidden transform hover:scale-105">
                    ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸°
                </button>

                <button id="timer-reset-button" onclick="resetTimer()" class="bg-gray-400 text-white px-6 py-2 rounded-full font-semibold shadow-lg hover:bg-gray-500 transition duration-300 hidden">
                    íƒ€ì´ë¨¸ ì´ˆê¸°í™”
                </button>
            </div>
        </div>
    </div>

    <script>
        // ë¼ë©´ ë°ì´í„° (ì œí’ˆëª…, ì¡°ë¦¬ ì‹œê°„(ì´ˆ), ì¡°ë¦¬ë²• ìš”ì•½)
        const ramenData = [
            { name: "ì‹ ë¼ë©´", time: 270, instructions: "ë¬¼ 550ml ë“ì¸ í›„ ë©´, ìŠ¤í”„, ê±´ë”ê¸° ë„£ê³  3ë¶„ 30ì´ˆ ë“ì¸ ë’¤ ê³„ë€ì´ë‚˜ ì¹˜ì¦ˆë¥¼ ì˜¬ë ¤ 1ë¶„ ë” ë“ì…ë‹ˆë‹¤. ì´ 4ë¶„ 30ì´ˆ ì…ë‹ˆë‹¤." },
            { name: "ë„ˆêµ¬ë¦¬", time: 300, instructions: "ë¬¼ 550ml ë“ì¸ í›„ ë©´, ë¶„ë§ìŠ¤í”„, ê±´ë”ê¸° ë‹¤ì‹œë§ˆë¥¼ ë„£ê³  5ë¶„ê°„ ë“ì…ë‹ˆë‹¤. ë‹¤ì‹œë§ˆëŠ” ë©´ê³¼ ê°™ì´ ë„£ì–´ì£¼ì„¸ìš”." },
            { name: "ì§œíŒŒê²Œí‹°", time: 300, instructions: "ë¬¼ 600mlì— ë©´ì„ 5ë¶„ ìµíˆê³  ë¬¼ 8ìˆŸê°€ë½ë§Œ ë‚¨ê¸°ê³  ë²„ë¦° ë’¤, ìœ ì„± ìŠ¤í”„ì™€ ë¶„ë§ ìŠ¤í”„ë¥¼ ë„£ê³  ë¹„ë²¼ ë“œì„¸ìš”." },
            { name: "ì§œì™•", time: 300, instructions: "ë¬¼ 600mlì— ë©´ì„ 5ë¶„ ìµíˆê³  ë¬¼ 8ìˆŸê°€ë½ë§Œ ë‚¨ê¸´ í›„, ì•¡ìƒê³¼ ë¶„ë§ ìŠ¤í”„ë¥¼ ë„£ê³  ë¹„ë²¼ ë“œì„¸ìš”. ì§œì¥ë¼ë©´ ì¡°ë¦¬ë²•ì…ë‹ˆë‹¤." },
            { name: "ì•ˆì„±íƒ•ë©´", time: 270, instructions: "ë¬¼ 550ml ë“ì¸ í›„ ë©´, ìŠ¤í”„, ê±´ë”ê¸°ë¥¼ ë„£ê³  4ë¶„ 30ì´ˆ ë“ì…ë‹ˆë‹¤." },
            { name: "ë¶ˆë‹­ë³¶ìŒë©´", time: 300, instructions: "ë¬¼ 600mlì— ë©´ì„ 5ë¶„ ìµíŒ í›„ ë¬¼ 8ìˆŸê°€ë½ë§Œ ë‚¨ê¸°ê³ , ì•¡ìƒ ì†ŒìŠ¤ì™€ ê¹€ê°€ë£¨ë¥¼ ë„£ê³  ë¹„ë²¼ ë“œì„¸ìš”." },
            { name: "ì‚¼ì–‘ë¼ë©´", time: 240, instructions: "ë¬¼ 550ml ë“ì¸ í›„ ë©´, ìŠ¤í”„, ê±´ë”ê¸°ë¥¼ ë„£ê³  3ë¶„ì—ì„œ 4ë¶„ ë“ì—¬ ë“œì„¸ìš”. ê¶Œì¥ ì‹œê°„ì€ 4ë¶„ì…ë‹ˆë‹¤." },
            { name: "ì§„ë¼ë©´", time: 240, instructions: "ë¬¼ 550ml ë“ì´ê³  ê±´ë”ê¸° ìŠ¤í”„ ë¨¼ì € ë„£ê³  ë“ì¸ ë’¤, ë¶„ë§ ìŠ¤í”„ì™€ ë©´ì„ ë„£ê³  4ë¶„ê°„ ë“ì…ë‹ˆë‹¤." },
            { name: "íŒ”ë„ ë¹„ë¹”ë©´", time: 180, instructions: "ë¬¼ 500mlì—ì„œ 600mlì— ë©´ì„ 3ë¶„ ì‚¶ì€ ë’¤ ì°¬ë¬¼ì— í—¹ê¶ˆ ë¬¼ê¸°ë¥¼ ì œê±°í•˜ê³  ì•¡ìƒ ì†ŒìŠ¤ì™€ ë¹„ë¹” ì•¼ì±„ë¥¼ ë„£ê³  ë¹„ë²¼ ë“œì„¸ìš”." },
            { name: "ì™•ëšœê»‘", time: 240, instructions: "ëœ¨ê±°ìš´ ë¬¼ì„ ë¶“ê³  ëšœê»‘ì„ ë®ì–´ 3ë¶„ì—ì„œ 4ë¶„ ë’¤ ë“œì‹œë©´ ë©ë‹ˆë‹¤. ì»µë¼ë©´ ê¸°ì¤€ì…ë‹ˆë‹¤." }
        ];

        let countdownTimer;
        let totalTimeInSeconds = 0;
        let currentStep = 0; // 0: ì„ íƒë¨, 1: ë¬¼ ë“ì´ê¸°, 2: ë©´ íˆ¬ì…/ì¤€ë¹„, 3: íƒ€ì´ë¨¸ ì§„í–‰
        let selectedRamenIndex = -1;
        // ì˜¤ë””ì˜¤ ê´€ë ¨ ë³€ìˆ˜ ì œê±°ë¨

        const timerDisplay = document.getElementById('timer-display');
        const timerMessage = document.getElementById('timer-message');
        const timerResetButton = document.getElementById('timer-reset-button');
        const currentRamenName = document.getElementById('current-ramen-name');
        const ramenInstructions = document.getElementById('ramen-instructions');
        const instructionCard = document.getElementById('instruction-card');
        const nextStepButton = document.getElementById('next-step-button');


        const stepMessages = [
            { btnText: "ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸°", msg: "1ë‹¨ê³„: ğŸ’§ **ë¬¼ì„ ë“ì—¬ì£¼ì„¸ìš”.** ëƒ„ë¹„ì— ë¬¼ì„ ë„£ê³  ë¶ˆì— ì˜¬ë¦½ë‹ˆë‹¤." },
            { btnText: "ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸°", msg: "2ë‹¨ê³„: ğŸœ **ë¼ë©´ì„ ë“ì¸ ë¬¼ì— ë„£ì–´ì£¼ì„¸ìš”.** ë©´ê³¼ ìŠ¤í”„ë¥¼ ë„£ìŠµë‹ˆë‹¤." },
            { btnText: "íƒ€ì´ë¨¸ ì‹œì‘", msg: "3ë‹¨ê³„: â±ï¸ **íƒ€ì´ë¨¸ë¥¼ ì‹œì‘ í•´ì£¼ì„¸ìš”.** ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì •í•´ì§„ ì‹œê°„ ë™ì•ˆ ë“ì…ë‹ˆë‹¤." }
        ];

        // --- TTS API ê´€ë ¨ í•¨ìˆ˜ ëª¨ë‘ ì œê±°ë¨ ---

        /**
         * ì´ˆê¸° ë²„íŠ¼ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
         */
        function renderRamenButtons() {
            const container = document.getElementById('ramen-buttons');
            container.innerHTML = '';
            ramenData.forEach((ramen, index) => {
                const button = document.createElement('button');
                button.textContent = ramen.name;
                button.id = `ramen-btn-${index}`;
                button.className = `ramen-button bg-red-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:bg-red-600 active:bg-red-700 transition duration-150 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-red-300`;
                button.onclick = () => selectRamen(index, button);
                container.appendChild(button);
            });
        }

        /**
         * ë¼ë©´ì„ ì„ íƒí–ˆì„ ë•Œ ì¡°ë¦¬ë²•ì„ í‘œì‹œí•˜ê³  ë‹¨ê³„ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
         * @param {number} index ì„ íƒëœ ë¼ë©´ ë°ì´í„°ì˜ ì¸ë±ìŠ¤
         * @param {HTMLElement} button í´ë¦­ëœ ë²„íŠ¼ ìš”ì†Œ
         */
        function selectRamen(index, button) {
            const ramen = ramenData[index];
            selectedRamenIndex = index;
            totalTimeInSeconds = ramen.time;
            currentStep = 0; // ì²« ë‹¨ê³„ë¡œ ì´ˆê¸°í™”
            
            // 1. ì¡°ë¦¬ë²• ì—…ë°ì´íŠ¸
            currentRamenName.textContent = ramen.name;
            ramenInstructions.textContent = ramen.instructions;
            instructionCard.classList.remove('hidden');

            // 2. íƒ€ì´ë¨¸ ì´ˆê¸°í™” ë° ë©”ì‹œì§€ ì„¤ì •
            resetTimer(false); // íƒ€ì´ë¨¸ë§Œ ì´ˆê¸°í™”, ë©”ì‹œì§€ ìˆ¨ê¹€ ì—†ìŒ
            
            timerDisplay.classList.add('hidden');
            timerResetButton.classList.add('hidden');
            nextStepButton.classList.remove('hidden');
            nextStepButton.classList.remove('bg-green-500'); // íƒ€ì´ë¨¸ ì‹œì‘ ìƒ‰ìƒ ì´ˆê¸°í™”
            nextStepButton.classList.add('bg-red-500');

            // 3. ë‹¨ê³„ë³„ ë©”ì‹œì§€/ë²„íŠ¼ ì„¤ì • (Step 0)
            nextStepButton.textContent = stepMessages[0].btnText;
            timerMessage.innerHTML = stepMessages[0].msg;
            
            // 4. ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.ramen-button').forEach(btn => {
                btn.classList.remove('bg-red-800', 'ring-4', 'ring-red-300');
                btn.classList.add('bg-red-500');
            });
            button.classList.remove('bg-red-500');
            button.classList.add('bg-red-800', 'ring-4', 'ring-red-300');
        }

        /**
         * ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê±°ë‚˜ íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
         */
        function nextStep() {
            if (selectedRamenIndex === -1) {
                showMessageBox('ê²½ê³ ', 'ë¨¼ì € ì¡°ë¦¬í•  ë¼ë©´ì„ ì„ íƒí•´ì£¼ì„¸ìš”!', 'bg-yellow-100 border-yellow-400 text-yellow-700');
                return;
            }

            currentStep++;

            if (currentStep < 3) {
                // 1ë‹¨ê³„, 2ë‹¨ê³„ ì§„í–‰
                nextStepButton.textContent = stepMessages[currentStep].btnText;
                timerMessage.innerHTML = stepMessages[currentStep].msg;
                
                if (currentStep === 2) {
                    // 3ë‹¨ê³„ ì§ì „: ë²„íŠ¼ í…ìŠ¤íŠ¸ì™€ ìƒ‰ìƒ ë³€ê²½
                    nextStepButton.textContent = stepMessages[currentStep].btnText;
                    nextStepButton.classList.remove('bg-red-500');
                    nextStepButton.classList.add('bg-green-500');

                    // 3ë‹¨ê³„ ë©”ì‹œì§€ì—ì„œëŠ” íƒ€ì´ë¨¸ ì‹œê°„ì„ ë¯¸ë¦¬ ë³´ì—¬ì¤Œ
                    const minutes = Math.floor(totalTimeInSeconds / 60);
                    const seconds = totalTimeInSeconds % 60;
                    const timeString = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    
                    timerMessage.innerHTML = `3ë‹¨ê³„: â±ï¸ **íƒ€ì´ë¨¸ë¥¼ ì‹œì‘ í•´ì£¼ì„¸ìš”.** (ì´ ${minutes}ë¶„ ${seconds}ì´ˆ)`;
                    timerDisplay.classList.remove('hidden');
                    updateTimerDisplay(totalTimeInSeconds);
                }

            } else {
                // 3ë‹¨ê³„: íƒ€ì´ë¨¸ ì‹œì‘
                startTimer();
                nextStepButton.classList.add('hidden');
                timerResetButton.classList.remove('hidden');
                timerMessage.textContent = 'ğŸ”¥ ë“ì´ëŠ” ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!';
            }
        }


        /**
         * íƒ€ì´ë¨¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
         */
        function startTimer() {
            let timeLeft = totalTimeInSeconds;
            
            timerDisplay.classList.remove('hidden');
            timerResetButton.classList.remove('hidden');
            
            // 1ì´ˆë§ˆë‹¤ íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
            countdownTimer = setInterval(() => {
                timeLeft--;

                if (timeLeft < 0) {
                    // ì¡°ë¦¬ ì™„ë£Œ
                    clearInterval(countdownTimer);
                    timerDisplay.textContent = '00:00';
                    timerDisplay.classList.remove('text-red-500');
                    timerDisplay.classList.add('text-green-600', 'animate-pulse');
                    timerMessage.textContent = 'âœ… ë¼ë©´ ì™„ì„±! ë§›ìˆê²Œ ë“œì„¸ìš”!';
                    timerResetButton.classList.remove('bg-gray-400');
                    timerResetButton.classList.add('bg-blue-500');
                    
                    // ì•Œë¦¼ (alert ëŒ€ì‹  ë©”ì‹œì§€ ì‚¬ìš©)
                    const finishMessage = `${ramenData[selectedRamenIndex].name} ì¡°ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë§›ìˆê²Œ ë“œì„¸ìš”!`;
                    showMessageBox('ì•Œë¦¼', finishMessage, 'bg-green-100 border-green-400 text-green-700');
                } else {
                    updateTimerDisplay(timeLeft);
                }
            }, 1000);
        }

        /**
         * íƒ€ì´ë¨¸ ë””ìŠ¤í”Œë ˆì´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         * @param {number} seconds ë‚¨ì€ ì‹œê°„(ì´ˆ)
         */
        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            const timeString = `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
            timerDisplay.textContent = timeString;
            
            // ë‚¨ì€ ì‹œê°„ì— ë”°ë¥¸ ìƒ‰ìƒ ë³€í™”
            if (seconds <= 30) {
                timerDisplay.classList.remove('text-red-500', 'text-yellow-500', 'text-green-600');
                timerDisplay.classList.add('text-red-600');
            } else if (seconds <= 60) {
                timerDisplay.classList.remove('text-red-500', 'text-red-600', 'text-green-600');
                timerDisplay.classList.add('text-yellow-500');
            } else {
                timerDisplay.classList.remove('text-yellow-500', 'text-red-600', 'text-green-600');
                timerDisplay.classList.add('text-red-500');
            }
        }

        /**
         * íƒ€ì´ë¨¸ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. (ì „ì²´ ìƒíƒœëŠ” ì´ˆê¸°í™”í•˜ì§€ ì•ŠìŒ)
         * @param {boolean} hideTimer ì´ˆê¸°í™” í›„ íƒ€ì´ë¨¸ ë””ìŠ¤í”Œë ˆì´ ìˆ¨ê¹€ ì—¬ë¶€
         */
        function resetTimer(hideTimer = true) {
            clearInterval(countdownTimer);
            
            if (hideTimer) {
                timerDisplay.classList.add('hidden');
                timerResetButton.classList.add('hidden');
            }
            
            timerDisplay.classList.remove('text-green-600', 'animate-pulse', 'text-yellow-500', 'text-red-600');
            timerDisplay.classList.add('text-red-500');
            timerResetButton.classList.remove('bg-blue-500');
            timerResetButton.classList.add('bg-gray-400');
            
            if(selectedRamenIndex !== -1) {
                currentStep = 0; // ì´ˆê¸° ë‹¨ê³„ë¡œ ë³µê·€
                nextStepButton.classList.remove('hidden');
                nextStepButton.textContent = stepMessages[0].btnText;
                nextStepButton.classList.remove('bg-green-500');
                nextStepButton.classList.add('bg-red-500');
                timerMessage.innerHTML = stepMessages[0].msg;
                updateTimerDisplay(totalTimeInSeconds);
            } else {
                 timerMessage.textContent = 'ì„ íƒì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...';
            }
        }
        
        /**
         * ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€ ë°•ìŠ¤ (alert() ëŒ€ì²´)
         * @param {string} title ì œëª©
         * @param {string} message ë‚´ìš©
         * @param {string} styleClass ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤
         */
        function showMessageBox(title, message, styleClass) {
            const existingBox = document.getElementById('message-box');
            if (existingBox) existingBox.remove();

            const messageBox = document.createElement('div');
            messageBox.id = 'message-box';
            messageBox.className = `fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50`;
            
            messageBox.innerHTML = `
                <div class="bg-white rounded-lg shadow-2xl p-6 max-w-sm w-full transform transition-all duration-300 scale-100 ${styleClass} border-4">
                    <h4 class="text-xl font-bold mb-3">${title}</h4>
                    <p class="mb-4">${message}</p>
                    <button onclick="document.getElementById('message-box').remove()" 
                        class="w-full bg-red-500 text-white font-semibold py-2 rounded-lg hover:bg-red-600 transition duration-150">
                        í™•ì¸
                    </button>
                </div>
            `;
            document.body.appendChild(messageBox);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë²„íŠ¼ ë Œë”ë§
        window.onload = renderRamenButtons;

    </script>
</body>
</html>
